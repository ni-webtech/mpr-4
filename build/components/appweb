#
#   Appweb
#
defineComponent() {
	local iflags libpaths path search optional libs builtin

    path=${1:-.}
    iflags=-I`probe --name appweb --dir --search "$path:$path/src/include" "appweb.h"`

    if [ "$path" != "." ] ; then
        libpaths=`probe --name appweb --dir --search "$path:$path/out/lib" "libappweb" `
        if [ "$libpaths" = "" ; then
            warnComponent appweb "Can't locate libappweb"
            return
        fi
    fi
    libs="appweb"

    optional="ssl"
	if [ "$BLD_STATIC" = 1 ] ; then
		if [ "$BLD_PRODUCT_APPWEB" = 1 ] ; then
        	if isdefined EJS ; then
				optional="$optional ejs"
                # NOTE: ejs second because required on Linux static builds for appweb
				libs="$libs ejs"
			fi
			if isdefined PHP ; then
				optional="$optional php"
			fi
		fi 
	fi

    deps="mpr"
    if [ -d src/deps ] ; then
        deps="$deps http"
    fi
    builtin=`[ "$path" = . ] && echo --builtin`
    configureComponent --libs "$libs" --libpaths "$libpaths" --iflags "$iflags" $builtin \
        --dependencies "$deps" --optional-dependencies "$optional" appweb
}
