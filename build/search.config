#
#   search.config -- Build search paths
#
#   Copyright (c) Embedthis Software LLC, 2003-2010. All Rights Reserved.
#
###############################################################################
#
#   Components are searched in order according to the SEARCH_PATHs defined below.
#   Each line in the search paths below defines a set of directories to search
#   when discovering tools. Each line must be in single quotes and may contain
#   wildcards. If the line contains shell variables to expand, you must back 
#   quote the "$".
#

#
#   Search path to use when building locally (not cross compiling)
#
BUILD_SEARCH_PATH="
    '/usr/bin'
    '/usr/local/bin'
    '/usr/local'
    '/usr/local/src'
    '/usr/lib'
    '/usr/src'
    '/bin'
    'src/deps'
    'src'
    '..'
    '.'
"

#
#   Search for the latest installed Windows SDK and Visual Studio
#
if [ "$BLD_BUILD_OS" = CYGWIN -o "$BLD_BUILD_OS" = WIN ] ; then
    VS_SEARCH=`locate cl "
        '/cygdrive/*/Program Files*/Microsoft Visual Studio 10.0/VC/Bin'
        '/cygdrive/*/Program Files*/Microsoft Visual Studio 9.0/VC/Bin'
        '/cygdrive/*/Program Files*/Microsoft Visual Studio 8.0/VC/Bin'
        '/cygdrive/*/Program Files*/Microsoft Visual Studio*/VC/Bin'
    "`
    if [ "$BLD_HOST_CPU" = x86_64 ] ; then
        if [ "${BLD_CROSS}" = 1 ] ; then
            VS64_SEARCH="'${VS_SEARCH}/x86_amd64'"
        else
            VS64_SEARCH="'${VS_SEARCH}/amd64'"
        fi
    fi
fi

if [ "$BLD_BUILD_OS" = WIN ] ; then
    #
    #   Append windows paths
    #
    BUILD_SEARCH_PATH="
        ${VS_SEARCH}
        '/cygdrive/*/Program Files*/Microsoft SDKs/Windows/*'
        '/cygdrive/*/Program Files*/Microsoft SDKs/Windows/*/bin'
        '/cygdrive/*/Program Files*/Inno*'
        $BUILD_SEARCH_PATH
    "
fi

#
#   Search path to use when cross-compiling for a target host
#
HOST_SEARCH_PATH="
    '/cygdrive/*/WindRiver/vx*'
    '/cygdrive/*/tornado'
    '/usr/bin'
    '/usr/local/bin'
    '/usr/local'
    '/usr/local/src'
    '/usr/lib'
    '/usr/src'
    '/bin'
    'src/deps'
    'src'
    '..'
    '.'
"
if [ "$WIND_HOME" != "" ] ; then
    HOST_SEARCH_PATH="$WIND_HOME $HOST_SEARCH_PATH"
fi

if [ "$BLD_BUILD_OS" = WIN ] ; then
    HOST_SEARCH_PATH="
        ${VS64_SEARCH}
        ${VS_SEARCH}
        '/cygdrive/*/WindRiver/vx*'
        '/cygdrive/*/tornado'
        '/cygdrive/*/Program Files*/Microsoft SDKs/Windows/*'
        '/cygdrive/*/Program Files*/Microsoft SDKs/Windows/*/bin'
        '/cygdrive/*/Program Files*/Inno*'
        $HOST_SEARCH_PATH
    "
fi
