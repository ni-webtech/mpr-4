<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>mpr: MprSocket</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>MprSocket</h1>Socket Service.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#g5bd6e40cb8a29c92a8f5e1ce9529b726">mprCloseSocket</a> (MprSocket *sp, bool graceful)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close a socket.  <a href="#g5bd6e40cb8a29c92a8f5e1ce9529b726"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">MprSocket *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9">mprCreateSocket</a> (<a class="el" href="group___mpr_mem.html#g1413d66bb5356730c6fa08ca0af6bc0f">MprCtx</a> ctx, struct MprSsl *ssl)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a socket.  <a href="#g2889978d5c1a2e1990eb3198379cdeb9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#g1e94b295effb81620c20b7ecf6e0e1d0">mprFlushSocket</a> (MprSocket *sp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flush a socket.  <a href="#g1e94b295effb81620c20b7ecf6e0e1d0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#g8240b2dc5540ae928d19410447c2bab0">mprGetSocketBlockingMode</a> (MprSocket *sp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the socket blocking mode.  <a href="#g8240b2dc5540ae928d19410447c2bab0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#g64ccf4250b432690a73bb66f0a639f7a">mprGetSocketError</a> (MprSocket *sp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a socket error code.  <a href="#g64ccf4250b432690a73bb66f0a639f7a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#g4ed3619958eac42ab4e8136464ae00c3">mprGetSocketFd</a> (MprSocket *sp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the socket file descriptor.  <a href="#g4ed3619958eac42ab4e8136464ae00c3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#ga4d2f67f80f168a4be7e5f3b96541bab">mprGetSocketPort</a> (MprSocket *sp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the port used by a socket.  <a href="#ga4d2f67f80f168a4be7e5f3b96541bab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#g9ba5a2637bcf166c5b3f4289e590bb39">mprHasSocketPendingData</a> (MprSocket *sp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Test if the socket has buffered read data.  <a href="#g9ba5a2637bcf166c5b3f4289e590bb39"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#g122966f272c5d7d00bab8f66d569d362">mprIsSocketEof</a> (MprSocket *sp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Test if the other end of the socket has been closed.  <a href="#g122966f272c5d7d00bab8f66d569d362"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#gbeeb5c489632e55d36e2139f8ac0f423">mprIsSocketSecure</a> (MprSocket *sp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine if the socket is secure.  <a href="#gbeeb5c489632e55d36e2139f8ac0f423"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#g52aa9a1c6e3f411df5f4cdd9e787ed16">mprOpenClientSocket</a> (MprSocket *sp, cchar *hostName, int port, int flags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open a client socket.  <a href="#g52aa9a1c6e3f411df5f4cdd9e787ed16"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#ge3e24d3cf87c63f71440aed20b5486cc">mprOpenServerSocket</a> (MprSocket *sp, cchar *ip, int port, int flags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open a server socket.  <a href="#ge3e24d3cf87c63f71440aed20b5486cc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#gbff8106d1e1a3b5aa108542d3241f0b5">mprReadSocket</a> (MprSocket *sp, void *buf, int size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read from a socket.  <a href="#gbff8106d1e1a3b5aa108542d3241f0b5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#ge2baa591f0466c9c64f0cf0147ada904">mprSetSocketBlockingMode</a> (MprSocket *sp, bool on)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the socket blocking mode.  <a href="#ge2baa591f0466c9c64f0cf0147ada904"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#g51594bafaa2003511990ffd804189a31">mprSetSocketNoDelay</a> (MprSocket *sp, bool on)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the socket delay mode.  <a href="#g51594bafaa2003511990ffd804189a31"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#gbd2ae7ff08fb05f45d78f728a3af93a1">mprWriteSocket</a> (MprSocket *sp, void *buf, int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write to a socket.  <a href="#gbd2ae7ff08fb05f45d78f728a3af93a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#gbf3c8418ff828a0301005b26ae06df92">mprWriteSocketString</a> (MprSocket *sp, cchar *str)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write to a string to a socket.  <a href="#gbf3c8418ff828a0301005b26ae06df92"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___mpr_socket.html#g50a28b5aac234b66ad03d0e3a8e38038">mprWriteSocketVector</a> (MprSocket *sp, MprIOVec *iovec, int count)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write a vector to a socket.  <a href="#g50a28b5aac234b66ad03d0e3a8e38038"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Socket Service. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>The MPR Socket service provides IPv4 and IPv6 capabilities for both client and server endpoints. Datagrams, Broadcast and point to point services are supported. The APIs can be used in both blocking and non-blocking modes. <br>
<br>
 The socket service integrates with the MPR worker thread pool and eventing services. Socket connections can be handled by threads from the worker thread pool for scalable, multithreaded applications.</dd></dl>
<dl class="user" compact><dt><b><b>API</b> Stability:</b></dt><dd>Evolving </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group___mpr_socket.html" title="Socket Service.">MprSocket</a>, <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a>, <a class="el" href="group___mpr_socket.html#g52aa9a1c6e3f411df5f4cdd9e787ed16" title="Open a client socket.">mprOpenClientSocket</a>, <a class="el" href="group___mpr_socket.html#ge3e24d3cf87c63f71440aed20b5486cc" title="Open a server socket.">mprOpenServerSocket</a>, <a class="el" href="group___mpr_socket.html#g5bd6e40cb8a29c92a8f5e1ce9529b726" title="Close a socket.">mprCloseSocket</a>, <a class="el" href="group___mpr_mem.html#g6d2fdfc4a34dc8ef4e7172fbcf977045" title="Free a block of memory.">mprFree</a>, <a class="el" href="group___mpr_socket.html#g1e94b295effb81620c20b7ecf6e0e1d0" title="Flush a socket.">mprFlushSocket</a>, <a class="el" href="group___mpr_socket.html#gbd2ae7ff08fb05f45d78f728a3af93a1" title="Write to a socket.">mprWriteSocket</a>, <a class="el" href="group___mpr_socket.html#gbf3c8418ff828a0301005b26ae06df92" title="Write to a string to a socket.">mprWriteSocketString</a>, <a class="el" href="group___mpr_socket.html#gbff8106d1e1a3b5aa108542d3241f0b5" title="Read from a socket.">mprReadSocket</a>, mprSetSocketCallback, mprSetSocketEventMask, <a class="el" href="group___mpr_socket.html#g8240b2dc5540ae928d19410447c2bab0" title="Get the socket blocking mode.">mprGetSocketBlockingMode</a>, <a class="el" href="group___mpr_socket.html#g122966f272c5d7d00bab8f66d569d362" title="Test if the other end of the socket has been closed.">mprIsSocketEof</a>, <a class="el" href="group___mpr_socket.html#g4ed3619958eac42ab4e8136464ae00c3" title="Get the socket file descriptor.">mprGetSocketFd</a>, <a class="el" href="group___mpr_socket.html#ga4d2f67f80f168a4be7e5f3b96541bab" title="Get the port used by a socket.">mprGetSocketPort</a>, <a class="el" href="group___mpr_socket.html#g8240b2dc5540ae928d19410447c2bab0" title="Get the socket blocking mode.">mprGetSocketBlockingMode</a>, <a class="el" href="group___mpr_socket.html#g51594bafaa2003511990ffd804189a31" title="Set the socket delay mode.">mprSetSocketNoDelay</a>, <a class="el" href="group___mpr_socket.html#g64ccf4250b432690a73bb66f0a639f7a" title="Get a socket error code.">mprGetSocketError</a>, <a class="el" href="mpr_8h.html#978aa9d1ee3d0fe7b50e566f3d471ed3" title="Parse an IP address.">mprParseIp</a>, mprSendFileToSocket, <a class="el" href="mpr_8h.html#27866b4c10d6e45ffd96604b221cf314" title="Set an EOF condition on the socket.">mprSetSocketEof</a>, <a class="el" href="group___mpr_socket.html#gbeeb5c489632e55d36e2139f8ac0f423" title="Determine if the socket is secure.">mprIsSocketSecure</a> <a class="el" href="group___mpr_socket.html#g50a28b5aac234b66ad03d0e3a8e38038" title="Write a vector to a socket.">mprWriteSocketVector</a> </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g5bd6e40cb8a29c92a8f5e1ce9529b726"></a><!-- doxytag: member="mpr.h::mprCloseSocket" ref="g5bd6e40cb8a29c92a8f5e1ce9529b726" args="(MprSocket *sp, bool graceful)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mprCloseSocket           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>graceful</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Close a socket. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Close a socket. If the <em>graceful</em> option is true, the socket will first wait for written data to drain before doing a graceful close. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>graceful</em>&nbsp;</td><td>Set to true to do a graceful close. Otherwise, an abortive close will be performed. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g2889978d5c1a2e1990eb3198379cdeb9"></a><!-- doxytag: member="mpr.h::mprCreateSocket" ref="g2889978d5c1a2e1990eb3198379cdeb9" args="(MprCtx ctx, struct MprSsl *ssl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MprSocket* mprCreateSocket           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___mpr_mem.html#g1413d66bb5356730c6fa08ca0af6bc0f">MprCtx</a>&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct MprSsl *&nbsp;</td>
          <td class="paramname"> <em>ssl</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a socket. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Create a new socket </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ctx</em>&nbsp;</td><td>Any memory allocation context created by MprAlloc </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ssl</em>&nbsp;</td><td>An optional SSL context if the socket is to support SSL. Use the <a class="el" href="mpr_8h.html#7bbe6982e4e64f2f034971b88d3da3af" title="Flag for mprCreateSocket to use the default SSL provider.">MPR_SECURE_CLIENT</a> define to specify that mprCreateSocket should use the default SSL provider. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A new socket object </dd></dl>

</div>
</div><p>
<a class="anchor" name="g1e94b295effb81620c20b7ecf6e0e1d0"></a><!-- doxytag: member="mpr.h::mprFlushSocket" ref="g1e94b295effb81620c20b7ecf6e0e1d0" args="(MprSocket *sp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprFlushSocket           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Flush a socket. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Flush any buffered data in a socket. Standard sockets do not use buffering and this call will do nothing. SSL sockets do buffer and calling mprFlushSocket will write pending written data. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A count of bytes actually written. Return a negative MPR error code on errors. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g8240b2dc5540ae928d19410447c2bab0"></a><!-- doxytag: member="mpr.h::mprGetSocketBlockingMode" ref="g8240b2dc5540ae928d19410447c2bab0" args="(MprSocket *sp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mprGetSocketBlockingMode           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the socket blocking mode. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Return the current blocking mode setting. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True if the socket is in blocking mode. Otherwise false. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g64ccf4250b432690a73bb66f0a639f7a"></a><!-- doxytag: member="mpr.h::mprGetSocketError" ref="g64ccf4250b432690a73bb66f0a639f7a" args="(MprSocket *sp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprGetSocketError           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get a socket error code. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>This will map a Windows socket error code into a posix error code. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A posix error code. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g4ed3619958eac42ab4e8136464ae00c3"></a><!-- doxytag: member="mpr.h::mprGetSocketFd" ref="g4ed3619958eac42ab4e8136464ae00c3" args="(MprSocket *sp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprGetSocketFd           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the socket file descriptor. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Get the file descriptor associated with a socket. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The integer file descriptor used by the O/S for the socket. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ga4d2f67f80f168a4be7e5f3b96541bab"></a><!-- doxytag: member="mpr.h::mprGetSocketPort" ref="ga4d2f67f80f168a4be7e5f3b96541bab" args="(MprSocket *sp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprGetSocketPort           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the port used by a socket. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Get the TCP/IP port number used by the socket. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The integer TCP/IP port number used by the socket. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g9ba5a2637bcf166c5b3f4289e590bb39"></a><!-- doxytag: member="mpr.h::mprHasSocketPendingData" ref="g9ba5a2637bcf166c5b3f4289e590bb39" args="(MprSocket *sp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mprHasSocketPendingData           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Test if the socket has buffered read data. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Use this function to avoid waiting for incoming I/O if data is already buffered. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True if the socket has pending read data. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g122966f272c5d7d00bab8f66d569d362"></a><!-- doxytag: member="mpr.h::mprIsSocketEof" ref="g122966f272c5d7d00bab8f66d569d362" args="(MprSocket *sp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mprIsSocketEof           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Test if the other end of the socket has been closed. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Determine if the other end of the socket has been closed and the socket is at end-of-file. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True if the socket is at end-of-file. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gbeeb5c489632e55d36e2139f8ac0f423"></a><!-- doxytag: member="mpr.h::mprIsSocketSecure" ref="gbeeb5c489632e55d36e2139f8ac0f423" args="(MprSocket *sp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mprIsSocketSecure           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine if the socket is secure. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Determine if the socket is using SSL to provide enhanced security. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True if the socket is using SSL, otherwise zero. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g52aa9a1c6e3f411df5f4cdd9e787ed16"></a><!-- doxytag: member="mpr.h::mprOpenClientSocket" ref="g52aa9a1c6e3f411df5f4cdd9e787ed16" args="(MprSocket *sp, cchar *hostName, int port, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprOpenClientSocket           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cchar *&nbsp;</td>
          <td class="paramname"> <em>hostName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Open a client socket. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Open a client connection </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned via <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hostName</em>&nbsp;</td><td>Host or IP address to connect to. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>TCP/IP port number to connect to. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Socket flags may use the following flags ored together: <ul>
<li>MPR_SOCKET_BLOCK - to use blocking I/O. The default is non-blocking. </li>
<li>MPR_SOCKET_BROADCAST - Use IPv4 broadcast </li>
<li>MPR_SOCKET_DATAGRAM - Use IPv4 datagrams </li>
<li>MPR_SOCKET_NOREUSE - Set NOREUSE flag on the socket </li>
<li>MPR_SOCKET_NODELAY - Set NODELAY on the socket </li>
<li>MPR_SOCKET_THREAD - Process callbacks on a separate thread. </li>
</ul>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Zero if the connection is successful. Otherwise a negative MPR error code. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ge3e24d3cf87c63f71440aed20b5486cc"></a><!-- doxytag: member="mpr.h::mprOpenServerSocket" ref="ge3e24d3cf87c63f71440aed20b5486cc" args="(MprSocket *sp, cchar *ip, int port, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprOpenServerSocket           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cchar *&nbsp;</td>
          <td class="paramname"> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Open a server socket. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Open a server socket and listen for client connections. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned via <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ip</em>&nbsp;</td><td>IP address to bind to. Set to 0.0.0.0 to bind to all possible addresses on a given port. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>TCP/IP port number to connect to. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Socket flags may use the following flags ored together: <ul>
<li>MPR_SOCKET_BLOCK - to use blocking I/O. The default is non-blocking. </li>
<li>MPR_SOCKET_BROADCAST - Use IPv4 broadcast </li>
<li>MPR_SOCKET_DATAGRAM - Use IPv4 datagrams </li>
<li>MPR_SOCKET_NOREUSE - Set NOREUSE flag on the socket </li>
<li>MPR_SOCKET_NODELAY - Set NODELAY on the socket </li>
<li>MPR_SOCKET_THREAD - Process callbacks on a separate thread. </li>
</ul>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Zero if the connection is successful. Otherwise a negative MPR error code. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gbff8106d1e1a3b5aa108542d3241f0b5"></a><!-- doxytag: member="mpr.h::mprReadSocket" ref="gbff8106d1e1a3b5aa108542d3241f0b5" args="(MprSocket *sp, void *buf, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprReadSocket           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read from a socket. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Read data from a socket. The read will return with whatever bytes are available. If none and the socket is in blocking mode, it will block untill there is some data available or the socket is disconnected. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>Pointer to a buffer to hold the read data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Size of the buffer. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A count of bytes actually read. Return a negative MPR error code on errors. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ge2baa591f0466c9c64f0cf0147ada904"></a><!-- doxytag: member="mpr.h::mprSetSocketBlockingMode" ref="ge2baa591f0466c9c64f0cf0147ada904" args="(MprSocket *sp, bool on)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprSetSocketBlockingMode           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>on</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the socket blocking mode. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Set the blocking mode for a socket. By default a socket is in non-blocking mode where read / write calls will not block. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>on</em>&nbsp;</td><td>Set to zero to put the socket into non-blocking mode. Set to non-zero to enable blocking mode. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The old blocking mode if successful or a negative MPR error code. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g51594bafaa2003511990ffd804189a31"></a><!-- doxytag: member="mpr.h::mprSetSocketNoDelay" ref="g51594bafaa2003511990ffd804189a31" args="(MprSocket *sp, bool on)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprSetSocketNoDelay           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>on</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the socket delay mode. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Set the socket delay behavior (nagle algorithm). By default a socket will partial packet writes a little to try to accumulate data and coalesce TCP/IP packages. Setting the delay mode to false may result in higher performance for interactive applications. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>on</em>&nbsp;</td><td>Set to non-zero to put the socket into no delay mode. Set to zero to enable the nagle algorithm. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The old delay mode if successful or a negative MPR error code. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gbd2ae7ff08fb05f45d78f728a3af93a1"></a><!-- doxytag: member="mpr.h::mprWriteSocket" ref="gbd2ae7ff08fb05f45d78f728a3af93a1" args="(MprSocket *sp, void *buf, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprWriteSocket           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write to a socket. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Write a block of data to a socket. If the socket is in non-blocking mode (the default), the write may return having written less than the required bytes. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>Reference to a block to write to the socket </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Length of data to write. This may be less than the requested write length if the socket is in non-blocking mode. Will return a negative MPR error code on errors. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A count of bytes actually written. Return a negative MPR error code on errors. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gbf3c8418ff828a0301005b26ae06df92"></a><!-- doxytag: member="mpr.h::mprWriteSocketString" ref="gbf3c8418ff828a0301005b26ae06df92" args="(MprSocket *sp, cchar *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprWriteSocketString           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cchar *&nbsp;</td>
          <td class="paramname"> <em>str</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write to a string to a socket. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Write a string to a socket. If the socket is in non-blocking mode (the default), the write may return having written less than the required bytes. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>str</em>&nbsp;</td><td>Null terminated string to write. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A count of bytes actually written. Return a negative MPR error code on errors. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g50a28b5aac234b66ad03d0e3a8e38038"></a><!-- doxytag: member="mpr.h::mprWriteSocketVector" ref="g50a28b5aac234b66ad03d0e3a8e38038" args="(MprSocket *sp, MprIOVec *iovec, int count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprWriteSocketVector           </td>
          <td>(</td>
          <td class="paramtype">MprSocket *&nbsp;</td>
          <td class="paramname"> <em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MprIOVec *&nbsp;</td>
          <td class="paramname"> <em>iovec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write a vector to a socket. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Do scatter/gather I/O by writing a vector of buffers to a socket. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>Socket object returned from <a class="el" href="group___mpr_socket.html#g2889978d5c1a2e1990eb3198379cdeb9" title="Create a socket.">mprCreateSocket</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>iovec</em>&nbsp;</td><td>Vector of data to write before the file contents </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>Count of entries in beforeVect </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A count of bytes actually written. Return a negative MPR error code on errors. </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Jan 19 11:56:18 2010 for mpr by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
